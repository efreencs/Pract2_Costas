<div class="books-container">
  <div class="header">
    <h1>Cat√†leg de Llibres</h1>
    <button class="btn-back" (click)="goHome()">Tornar al Home</button>
  </div>

  <div class="search-section">
    <input
      type="text"
      [(ngModel)]="searchQuery"
      placeholder="Buscar per t√≠tol o autor..."
      class="search-input"
    />
    <button class="btn-search" (click)="filterBooks()">Buscar</button>
  </div>

  <div *ngIf="loading" class="loading">
    Carregant llibres...
  </div>

  <div *ngIf="!loading && filteredBooks.length === 0" class="empty-state">
    <p>No s'han trobat llibres</p>
  </div>

  <div *ngIf="!loading && filteredBooks.length > 0" class="books-section">
    <div class="books-grid">
      <div *ngFor="let book of filteredBooks" class="book-card">
        <div class="book-cover">
          <div class="cover-placeholder">
            üìö
          </div>
        </div>

        <div class="book-info">
          <h3 class="book-title">{{ book.titol }}</h3>
          <p class="book-author">{{ book.autor }}</p>
          <p class="book-category">{{ book.categoria }}</p>

          <div class="book-details">
            <div class="detail">
              <span class="label">ISBN:</span>
              <span class="value">{{ book.isbn }}</span>
            </div>
            <div class="detail">
              <span class="label">Any:</span>
              <span class="value">{{ book.any }}</span>
            </div>
            <div class="detail">
              <span class="label">C√≤pies Disponibles:</span>
              <span class="value" [ngClass]="book.quantitatDisponible === 0 ? 'no-available' : ''">
                {{ book.quantitatDisponible }}
              </span>
            </div>
          </div>

          <button
            class="btn-loan"
            (click)="borrowBook(book._id)"
            [disabled]="book.quantitatDisponible === 0 || loaningBookId === book._id"
          >
            <span *ngIf="loaningBookId === book._id">Solicitant...</span>
            <span *ngIf="loaningBookId !== book._id && book.quantitatDisponible === 0">No Disponible</span>
            <span *ngIf="loaningBookId !== book._id && book.quantitatDisponible > 0">Solicitar Pr√©stec</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast per missatges -->
  <div *ngIf="successMessage" class="toast success-toast">
    <span class="toast-icon">‚úÖ</span>
    <span>{{ successMessage }}</span>
  </div>

  <div *ngIf="errorMessage" class="toast error-toast">
    <span class="toast-icon">‚ùå</span>
    <span>{{ errorMessage }}</span>
  </div>
</div>
