{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet MyLoansComponent = class MyLoansComponent {\n  constructor(loanService, router) {\n    this.loanService = loanService;\n    this.router = router;\n    this.loans = [];\n    this.loading = true;\n    this.isReturning = false;\n    this.errorMessage = '';\n  }\n  ngOnInit() {\n    this.loadLoans();\n  }\n  loadLoans() {\n    this.loanService.getMyLoans().subscribe(response => {\n      this.loans = response.loans || [];\n      this.loading = false;\n    }, error => {\n      console.log('Error carregant préstecs', error);\n      this.errorMessage = error.error.message || 'Error carregant els préstecs';\n      this.loading = false;\n    });\n  }\n  returnLoan(loanId) {\n    this.isReturning = true;\n    this.loanService.returnLoan(loanId).subscribe(response => {\n      this.isReturning = false;\n      this.loadLoans();\n    }, error => {\n      this.isReturning = false;\n      this.errorMessage = error.error.message || 'Error retornant el llibre';\n    });\n  }\n  isOverdue(loan) {\n    const returnDate = new Date(loan.returnDate);\n    const today = new Date();\n    return returnDate < today && loan.status !== 'Retornat';\n  }\n  goHome() {\n    this.router.navigate(['/home']);\n  }\n};\nMyLoansComponent = __decorate([Component({\n  selector: 'app-my-loans',\n  templateUrl: './my-loans.component.html',\n  styleUrls: ['./my-loans.component.css']\n})], MyLoansComponent);\nexport { MyLoansComponent };","map":{"version":3,"names":["Component","MyLoansComponent","constructor","loanService","router","loans","loading","isReturning","errorMessage","ngOnInit","loadLoans","getMyLoans","subscribe","response","error","console","log","message","returnLoan","loanId","isOverdue","loan","returnDate","Date","today","status","goHome","navigate","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\efren\\OneDrive\\Escriptori\\Enginyeria de llocs web\\Pract2_Costas\\frontend\\src\\app\\components\\my-loans\\my-loans.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { LoanService } from '@services/LoanService';\r\n\r\n@Component({\r\n  selector: 'app-my-loans',\r\n  templateUrl: './my-loans.component.html',\r\n  styleUrls: ['./my-loans.component.css']\r\n})\r\nexport class MyLoansComponent implements OnInit {\r\n  loans: any[] = [];\r\n  loading: boolean = true;\r\n  isReturning: boolean = false;\r\n  errorMessage: string = '';\r\n\r\n  constructor(\r\n    private loanService: LoanService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadLoans();\r\n  }\r\n\r\n  loadLoans(): void {\r\n    this.loanService.getMyLoans().subscribe(\r\n      (response: any) => {\r\n        this.loans = response.loans || [];\r\n        this.loading = false;\r\n      },\r\n      (error: any) => {\r\n        console.log('Error carregant préstecs', error);\r\n        this.errorMessage = error.error.message || 'Error carregant els préstecs';\r\n        this.loading = false;\r\n      }\r\n    );\r\n  }\r\n\r\n  returnLoan(loanId: string): void {\r\n    this.isReturning = true;\r\n    this.loanService.returnLoan(loanId).subscribe(\r\n      (response: any) => {\r\n        this.isReturning = false;\r\n        this.loadLoans();\r\n      },\r\n      (error: any) => {\r\n        this.isReturning = false;\r\n        this.errorMessage = error.error.message || 'Error retornant el llibre';\r\n      }\r\n    );\r\n  }\r\n\r\n  isOverdue(loan: any): boolean {\r\n    const returnDate = new Date(loan.returnDate);\r\n    const today = new Date();\r\n    return returnDate < today && loan.status !== 'Retornat';\r\n  }\r\n\r\n  goHome(): void {\r\n    this.router.navigate(['/home']);\r\n  }\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAS1C,IAAMC,gBAAgB,GAAtB,MAAMA,gBAAgB;EAM3BC,YACUC,WAAwB,EACxBC,MAAc;IADd,KAAAD,WAAW,GAAXA,WAAW;IACX,KAAAC,MAAM,GAANA,MAAM;IAPhB,KAAAC,KAAK,GAAU,EAAE;IACjB,KAAAC,OAAO,GAAY,IAAI;IACvB,KAAAC,WAAW,GAAY,KAAK;IAC5B,KAAAC,YAAY,GAAW,EAAE;EAKtB;EAEHC,QAAQA,CAAA;IACN,IAAI,CAACC,SAAS,EAAE;EAClB;EAEAA,SAASA,CAAA;IACP,IAAI,CAACP,WAAW,CAACQ,UAAU,EAAE,CAACC,SAAS,CACpCC,QAAa,IAAI;MAChB,IAAI,CAACR,KAAK,GAAGQ,QAAQ,CAACR,KAAK,IAAI,EAAE;MACjC,IAAI,CAACC,OAAO,GAAG,KAAK;IACtB,CAAC,EACAQ,KAAU,IAAI;MACbC,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEF,KAAK,CAAC;MAC9C,IAAI,CAACN,YAAY,GAAGM,KAAK,CAACA,KAAK,CAACG,OAAO,IAAI,8BAA8B;MACzE,IAAI,CAACX,OAAO,GAAG,KAAK;IACtB,CAAC,CACF;EACH;EAEAY,UAAUA,CAACC,MAAc;IACvB,IAAI,CAACZ,WAAW,GAAG,IAAI;IACvB,IAAI,CAACJ,WAAW,CAACe,UAAU,CAACC,MAAM,CAAC,CAACP,SAAS,CAC1CC,QAAa,IAAI;MAChB,IAAI,CAACN,WAAW,GAAG,KAAK;MACxB,IAAI,CAACG,SAAS,EAAE;IAClB,CAAC,EACAI,KAAU,IAAI;MACb,IAAI,CAACP,WAAW,GAAG,KAAK;MACxB,IAAI,CAACC,YAAY,GAAGM,KAAK,CAACA,KAAK,CAACG,OAAO,IAAI,2BAA2B;IACxE,CAAC,CACF;EACH;EAEAG,SAASA,CAACC,IAAS;IACjB,MAAMC,UAAU,GAAG,IAAIC,IAAI,CAACF,IAAI,CAACC,UAAU,CAAC;IAC5C,MAAME,KAAK,GAAG,IAAID,IAAI,EAAE;IACxB,OAAOD,UAAU,GAAGE,KAAK,IAAIH,IAAI,CAACI,MAAM,KAAK,UAAU;EACzD;EAEAC,MAAMA,CAAA;IACJ,IAAI,CAACtB,MAAM,CAACuB,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;EACjC;CACD;AApDY1B,gBAAgB,GAAA2B,UAAA,EAL5B5B,SAAS,CAAC;EACT6B,QAAQ,EAAE,cAAc;EACxBC,WAAW,EAAE,2BAA2B;EACxCC,SAAS,EAAE,CAAC,0BAA0B;CACvC,CAAC,C,EACW9B,gBAAgB,CAoD5B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}