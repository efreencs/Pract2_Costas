{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet HomeComponent = class HomeComponent {\n  constructor(userService, loanService, bookService, router) {\n    this.userService = userService;\n    this.loanService = loanService;\n    this.bookService = bookService;\n    this.router = router;\n    this.userName = '';\n    this.activeLoans = 0;\n    this.totalBooks = 0;\n    this.userRating = '5.0';\n    this.loading = true;\n  }\n  ngOnInit() {\n    this.loadData();\n  }\n  loadData() {\n    // Obtenir perfil de l'usuari\n    this.userService.getProfile().subscribe(user => {\n      this.userName = user.name || 'Usuari';\n      this.userRating = user.rating || '5.0';\n    }, error => {\n      console.log('Error carregant perfil', error);\n    });\n    // Obtenir els meus préstecs\n    this.loanService.getMyLoans().subscribe(loans => {\n      this.activeLoans = loans.length || 0;\n    }, error => {\n      console.log('Error carregant préstecs', error);\n    });\n    // Obtenir tots els llibres\n    this.bookService.getAllBooks().subscribe(books => {\n      this.totalBooks = books.length || 0;\n      this.loading = false;\n    }, error => {\n      console.log('Error carregant llibres', error);\n      this.loading = false;\n    });\n  }\n  goToBooks() {\n    this.router.navigate(['/books']);\n  }\n  goToLoans() {\n    this.router.navigate(['/my-loans']);\n  }\n  goToProfile() {\n    this.router.navigate(['/profile']);\n  }\n  logout() {\n    localStorage.removeItem('token');\n    this.router.navigate(['/login']);\n  }\n};\nHomeComponent = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})], HomeComponent);\nexport { HomeComponent };","map":{"version":3,"names":["Component","HomeComponent","constructor","userService","loanService","bookService","router","userName","activeLoans","totalBooks","userRating","loading","ngOnInit","loadData","getProfile","subscribe","user","name","rating","error","console","log","getMyLoans","loans","length","getAllBooks","books","goToBooks","navigate","goToLoans","goToProfile","logout","localStorage","removeItem","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\efren\\OneDrive\\Escriptori\\Enginyeria de llocs web\\Pract2_Costas\\frontend\\src\\app\\components\\home\\home.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { UserService } from '@services/UserService';\r\nimport { LoanService } from '@services/LoanService';\r\nimport { BookService } from '@services/BookService';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n  styleUrls: ['./home.component.css']\r\n})\r\nexport class HomeComponent implements OnInit {\r\n  userName: string = '';\r\n  activeLoans: number = 0;\r\n  totalBooks: number = 0;\r\n  userRating: string = '5.0';\r\n  loading: boolean = true;\r\n\r\n  constructor(\r\n    private userService: UserService,\r\n    private loanService: LoanService,\r\n    private bookService: BookService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadData();\r\n  }\r\n\r\n  loadData(): void {\r\n    // Obtenir perfil de l'usuari\r\n    this.userService.getProfile().subscribe(\r\n      (user: any) => {\r\n        this.userName = user.name || 'Usuari';\r\n        this.userRating = user.rating || '5.0';\r\n      },\r\n      (error: any) => {\r\n        console.log('Error carregant perfil', error);\r\n      }\r\n    );\r\n\r\n    // Obtenir els meus préstecs\r\n    this.loanService.getMyLoans().subscribe(\r\n      (loans: any) => {\r\n        this.activeLoans = loans.length || 0;\r\n      },\r\n      (error: any) => {\r\n        console.log('Error carregant préstecs', error);\r\n      }\r\n    );\r\n\r\n    // Obtenir tots els llibres\r\n    this.bookService.getAllBooks().subscribe(\r\n      (books: any) => {\r\n        this.totalBooks = books.length || 0;\r\n        this.loading = false;\r\n      },\r\n      (error: any) => {\r\n        console.log('Error carregant llibres', error);\r\n        this.loading = false;\r\n      }\r\n    );\r\n  }\r\n\r\n  goToBooks(): void {\r\n    this.router.navigate(['/books']);\r\n  }\r\n\r\n  goToLoans(): void {\r\n    this.router.navigate(['/my-loans']);\r\n  }\r\n\r\n  goToProfile(): void {\r\n    this.router.navigate(['/profile']);\r\n  }\r\n\r\n  logout(): void {\r\n    localStorage.removeItem('token');\r\n    this.router.navigate(['/login']);\r\n  }\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAW1C,IAAMC,aAAa,GAAnB,MAAMA,aAAa;EAOxBC,YACUC,WAAwB,EACxBC,WAAwB,EACxBC,WAAwB,EACxBC,MAAc;IAHd,KAAAH,WAAW,GAAXA,WAAW;IACX,KAAAC,WAAW,GAAXA,WAAW;IACX,KAAAC,WAAW,GAAXA,WAAW;IACX,KAAAC,MAAM,GAANA,MAAM;IAVhB,KAAAC,QAAQ,GAAW,EAAE;IACrB,KAAAC,WAAW,GAAW,CAAC;IACvB,KAAAC,UAAU,GAAW,CAAC;IACtB,KAAAC,UAAU,GAAW,KAAK;IAC1B,KAAAC,OAAO,GAAY,IAAI;EAOpB;EAEHC,QAAQA,CAAA;IACN,IAAI,CAACC,QAAQ,EAAE;EACjB;EAEAA,QAAQA,CAAA;IACN;IACA,IAAI,CAACV,WAAW,CAACW,UAAU,EAAE,CAACC,SAAS,CACpCC,IAAS,IAAI;MACZ,IAAI,CAACT,QAAQ,GAAGS,IAAI,CAACC,IAAI,IAAI,QAAQ;MACrC,IAAI,CAACP,UAAU,GAAGM,IAAI,CAACE,MAAM,IAAI,KAAK;IACxC,CAAC,EACAC,KAAU,IAAI;MACbC,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEF,KAAK,CAAC;IAC9C,CAAC,CACF;IAED;IACA,IAAI,CAACf,WAAW,CAACkB,UAAU,EAAE,CAACP,SAAS,CACpCQ,KAAU,IAAI;MACb,IAAI,CAACf,WAAW,GAAGe,KAAK,CAACC,MAAM,IAAI,CAAC;IACtC,CAAC,EACAL,KAAU,IAAI;MACbC,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEF,KAAK,CAAC;IAChD,CAAC,CACF;IAED;IACA,IAAI,CAACd,WAAW,CAACoB,WAAW,EAAE,CAACV,SAAS,CACrCW,KAAU,IAAI;MACb,IAAI,CAACjB,UAAU,GAAGiB,KAAK,CAACF,MAAM,IAAI,CAAC;MACnC,IAAI,CAACb,OAAO,GAAG,KAAK;IACtB,CAAC,EACAQ,KAAU,IAAI;MACbC,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEF,KAAK,CAAC;MAC7C,IAAI,CAACR,OAAO,GAAG,KAAK;IACtB,CAAC,CACF;EACH;EAEAgB,SAASA,CAAA;IACP,IAAI,CAACrB,MAAM,CAACsB,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;EAClC;EAEAC,SAASA,CAAA;IACP,IAAI,CAACvB,MAAM,CAACsB,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC;EACrC;EAEAE,WAAWA,CAAA;IACT,IAAI,CAACxB,MAAM,CAACsB,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC;EACpC;EAEAG,MAAMA,CAAA;IACJC,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC;IAChC,IAAI,CAAC3B,MAAM,CAACsB,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;EAClC;CACD;AArEY3B,aAAa,GAAAiC,UAAA,EALzBlC,SAAS,CAAC;EACTmC,QAAQ,EAAE,UAAU;EACpBC,WAAW,EAAE,uBAAuB;EACpCC,SAAS,EAAE,CAAC,sBAAsB;CACnC,CAAC,C,EACWpC,aAAa,CAqEzB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}